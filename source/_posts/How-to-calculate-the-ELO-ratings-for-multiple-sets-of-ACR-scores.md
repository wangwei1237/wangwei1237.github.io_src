---
title: 如何计算多组 ACR 打分的 ELO 积分
reward: false
top: false
date: 2024-03-13 13:22:44
authors:
categories:
  - 算法与数学
tags:
  - ACR
  - Elo rating
---

![](1.jpeg)

在 [有趣的 Elo 积分系统](/2023/08/12/the-interesting-elo-rating-system/) 这篇文章中，我们介绍了 Elo 积分系统的基本原理，并介绍了我们如何在视频评估系统中采用 Elo 积分来评估不同编解码器之间的性能。不过，之前文章中介绍的是对于 ***成对打分*** 场景下应用  Elo 积分，在本文中，我们将介绍在 ***ACR 打分场景*** 下如何采用 ELO 积分评估不同方案的性能。
<!--more-->

## 背景
我们最近需要评估不同版本的 TTS 的表现效果，由于我们的评估系统 [度知了](/2023/02/13/duzhiliao/) 还不支持对纯音频的评估，因此我们需要把音频转换为视频，然后利用视频的评估方案对音频进行评估。

```bash
ffmpeg -f lavfi -i color=s=1920x1080:r=15:c='0x000000':d=5 \
-i INPUT.mp3 \
-map "0:v" -map "1:a" -acodec copy OUTPUT.mp4
```
在 *度知了* 中，采用 *成对评估法* 对视频进行打分时没有开放切换视频语音的能力（在视频评估中，我们认为音频效果并非核心关注点），因此我们需要采用接下来要介绍的 *ACR 打分法* 对音频进行打分。

于是，也就有了本文提到的问题：如何计算多组 ACR 打分的 ELO 积分？

## 什么是 ACR 打分？
[ACR（绝对等级评分）打分](https://wangwei1237.github.io/digital_video_concepts/docs/4_2_1_SubjectiveVideoQualityEvaluation.html) 是音、视频主观质量评估标准中的一种评估方法。在 ACR 的打分过程中，会逐个呈现测试序列中的每一个待评估样本，并针对每一个样本在质量等级量表内对其进行独立打分。ACR 也称之为单刺激方法，其中受试者观看、听取一个刺激（例如，视频剪辑、音频剪辑），然后对其进行独立评级。

在 我们的评估系统中，采用标准的 ACR 打分量级表：

| 分数 | 等级 | 解释 |
| :---: | :---: | :---: |
| 5 | Excellent | 优秀 |
| 4 | Good | 良好 |
| 3 | Fair | 普通 |
| 2 | Poor | 较差 |
| 1 | Bad | 差 |

针对每一个样本，我们会让至少 10 名用户按照如上的量级表进行打分，然后根据用户的打分（$S_{i,j}$，第 $i$ 个用户对第 $j$ 个样本的打分）得到每个样本的 $MOS_j$ 分（平均主观得分），最后我们会将 5 分制的 $MOS$ 分转换为 100 分制的 $MOS$ 分作为该样本的最终 $MOS$ 分。

$$
MOS_j = \big(\frac{1}{N} \sum_{i=1}^{N} S_{i,j} - 1 \big) \times 25
$$

## ACR 的评估方案
我们有两个不同版本的 TTS 模型，我们抽取了 100 个文本样本利用不同的模型分别生成了对应的音频样本 $sample_A$，$sample_B$，然后我们采用洗牌算法对两个样本进行打乱，然后招募用户对这些样本进行音频效果的 ACR 打分。

$$
sample = shuffle\big(\{sample_A, sample_B\}\big)
$$

用户打分完毕之后，我们会得到混合之后的样本的 $MOS$ 得分（$MOS_{sample}$），然后我们根据生成样本的 TTS 的模型的不同得到 A、B 两组 $MOS$ 打分：$MOS_A$，$MOS_B$。

